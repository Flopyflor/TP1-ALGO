\documentclass[10pt,a4paper]{article}

\input{AEDmacros}
\usepackage{caratula} % Version modificada para usar las macros de algo1 de ~> https://github.com/bcardiff/dc-tex


\titulo{IDK chicos, un título}
\subtitulo{Subtítulo del tp}

\fecha{\today}

\materia{Algoritmos}
\grupo{losdecompusongentedebien}

\integrante{Allami, Florencia}{484/23}{allamiflorencia@gmail.com}
\integrante{Bartoli, Matilda}{175/23}{bartoli.matilda@gmail.com}
\integrante{Apellido, Nombre3}{003/01}{email3@dominio.com}
\integrante{Apellido, Nombre4}{004/01}{email4@dominio.com}
% Pongan cuantos integrantes quieran

% Declaramos donde van a estar las figuras
% No es obligatorio, pero suele ser comodo
\graphicspath{{../static/}}

\begin{document}

\maketitle

\section{Ejercicio 1}

\subsection{redistribucionDeLosFrutos}

% TODO: acá dejé en el asegura un \res y varios result... el paquete que nos dieron los profes define res, usamos eso no? o prefieren result?
\begin{proc}{redistribucionDeLosFrutos}{\In recursos: \TLista{\float}, \In cooperan: \TLista{\bool}}{\TLista{\float}}
	\requiere{\paraTodo[unalinea]{e}{\float}{e \in recursos \implica e \ge 0} \land \longitud{cooperan} = \longitud{recursos}}
	\asegura{|\res| = |recursos| \yLuego \paraTodo{i}{\ent}{0 <= i \le |result| \implicaLuego \IfThenElse{cooperan[i] = \True}{result[i] = \frac{fondoComun(recursos, cooperan)}{\longitud{recursos}}}{result[i] = recursos[i] + \frac{fondoComun(recursos, cooperan)}{\longitud{recursos}}}}} 
\end{proc}

\aux{fondoComun}{recursos: \TLista{\float}, cooperan: \TLista{\bool}}{\float}{
	\sum\limits_{i=0}^{\longitud{recursos}-1} \IfThenElse{cooperan[i] = \True}{recursos[i]}{0}
}

\subsection{trayectoriaDeLosFrutosIndividualesALargoPlazo}

\begin{proc}{trayectoriaDeLosFrutosIndividualesALargoPlazo}{
	\Inout trayectorias: \TLista{\TLista{\float}}, \In cooperan: \TLista{\bool}, \In apuestas: \TLista{\TLista{\float}},
	\In pagos: \TLista{\TLista{\float}}, \In eventos: \TLista{\TLista{\nat}}
}{}
	\requiere{
		|trayectorias| = |eventos| = |cooperan| = |apuestas| = |pagos| \yLuego \\
		\paraTodo[unalinea]{i}{\ent}{0 \le i < |cooperan| \implicaLuego |trayectorias[i]| = 1 \land |apuestas[i]| = |pagos[i]|} \land \\
		% TODO: querémos que todos los individuos apuesten a la misma cantidad de eventos?
		todosElementosDeLasListasPositivos(pagos) \land todosElementosDeLasListasPositivos(trayectorias) \land \\
		eventosValidos(eventos, pagos) \land seApuestaTodo(apuestas)
	}
	\asegura{
		|trayectorias| = |eventos| \yLuego \\
		\paraTodo[unalinea]{i}{\ent}{0 \le i < |trayectorias| \implicaLuego |trayectorias[i]| = |eventos[0]|+1} \land \\
		% TODO: acá está el 0 pq todos tienen la misma cantidad de eventos. 
		% si les hace ruido podemos cambiarlo a eventos[i] y agregar otra sentencia 
		% que verifique que sea la misma cantidad de eventos para cada individuo. 
		% ...En realidad, no encuentro ninguna parte de la consigna que diga que 
		% tiene que ser la misma cantidad de eventos para cada individuo? pero, sino 
		% no tiene mucho sentido, no? cómo afectaría al fondo común sino?
		elPrincipioSigueIgual(old(trayectorias), trayectorias) \land \\
		estaBienCalculado(trayectorias, eventos, cooperan, apuestas, pagos)
	}

\end{proc}

% TODO: todosElementosDeLasListasPositivos
% TODO: seApuestaTodo (apuestas suman 1)
% TODO: eventosValidos (indices válidos para pagos)

\vspace{5mm} % espacio de 5mm entre los cosos

\pred{estaBienCalculado}{trayectorias: \TLista{\TLista{\float}}, eventos: \TLista{\TLista{\nat}}, 
cooperan: \TLista{\bool}, apuestas: \TLista{\TLista{\float}}, pagos: \TLista{\TLista{\float}}}{
	\paraTodo{i}{\ent}{\paraTodo{t}{\ent}{(0 \le i < |cooperan| \land 0 < t \le |eventos[0]|) \yLuego \\
	trayectorias[i][t] = calcularPlataConFondo(i, t, cooperan, apuestas, pagos, eventos, trayectorias)}}
}

\vspace{5mm}


\aux{calcularPlataConFondo}{individuo: \nat, tiempo: \nat, cooperan: \TLista{\bool}, apuestas: \TLista{\TLista{\float}}, 
pagos: \TLista{\TLista{\float}}, eventos: \TLista{\TLista{\nat}}, trayectorias: \TLista{\TLista{\float}}}{\float}{ \\
	\IfThenElse{cooperan[individuo] = \True}{fondoDistribuido(tiempo, apuestas, pagos, eventos, trayectorias, cooperan) \\}
	{nuevaPlataSinFondo(individuo, tiempo, apuestas, pagos, eventos, trayectorias) \\
	+ fondoDistribuido(tiempo, apuestas, pagos, eventos, trayectorias, cooperan)}
}

\vspace{5mm}

\aux{nuevaPlataSinFondo}{individuo: \nat, tiempo: \nat, apuestas: \TLista{\TLista{\float}}, 
pagos: \TLista{\TLista{\float}}, eventos: \TLista{\TLista{\nat}}, trayectorias: \TLista{\TLista{\float}}}
{\float}{
	apuesta[individuo][eventos[individuo][tiempo]] * pagos[individuo][eventos[individuo][tiempo]] \times trayectorias[individuo][tiempo - 1]
	% TODO:  cual prefieren? \times o *?
	% TODO: si quieren cambiar eventos[individuo][tiempo] 
	% por algo más legible están invitados lol. Por ahí si cambiamos la entrada a <evento> directo?
}

\vspace{5mm}

\aux{fondoDistribuido}{tiempo: \ent, apuestas: \TLista{\TLista{\float}}, pagos: \TLista{\TLista{\float}}, 
eventos: \TLista{\TLista{\ent}}, trayectorias: {\TLista{\TLista{\float}}}, cooperan: \TLista{\bool}}{\float}{
	\sum\limits_{i=0}^{|cooperan|-1}{\IfThenElse{cooperan[i] = \True \\}
	{nuevaPlataSinFondo(i, tiempo, apuestas, pagos, eventos, trayectorias)/|cooperan| \\}{0}}
	% TODO: van a notar que puse la división acá. para no ponerla tanto arriba, que re no entraba nada.
	% TODO: hay que encontrar la forma de poner un linebreak o algo acá pq no se lee :(
}

\subsection{trayectoriaExtrañaEscalera}
\subsection{individuoDecideSiCooperarONo}

\aux{fondoEnTurno}{turno: \ent, eventos: \TLista{\TLista{\ent}}, cooperan: \TLista{\bool}, 
recursos: \TLista{\float}, pagos: \TLista{\TLista{\float}}, apuestas: \TLista{\TLista{\float}}}{\float}{
	(\prod\limits_{k=0}^{turno}{tasasDeCooperadores(k, cooperan, pagos, apuestas)}) * \\ recursosDeCooperadoresIniciales(cooperan, recursos)
}

\vspace{5mm} % TODO: estoy pensando... por ahí se puede agregar a la definición de aux/pred. estaría cool

\aux{tasasDeCooperadores}{turno: \ent, cooperan: \TLista{\bool}, pagos: \TLista{\TLista{\float}}, apuestas: \TLista{\TLista{\float}, eventos: \TLista{\TLista{\ent}}}}{}{
	\\ \sum\limits_{i=0}^{|cooperan|-1}{\IfThenElse{cooperan[i] = \True}{\frac{tasaEnTurno(turno, i, pagos, apuestas, eventos)}{|cooperan|}}{0}}
}

\vspace{5mm}

\aux{recursosDeCooperadoresIniciales}{cooperan: \TLista{\bool}, recursos: \TLista{\float}}{\float}{
	\\ \sum\limits_{i=0}^{|cooperan|}{\IfThenElse{cooperan[i] = \True}{\frac{recursos[i]}{|cooperan|}}{0}}
}

\vspace{5mm}

\aux{tasaEnTurno}{turno: \ent, individuo: \ent, pagos: \TLista{\TLista{\float}}, 
apuestas: \TLista{\TLista{\float}}, eventos: \TLista{\TLista{\ent}}}{\float}{ \\
	pagos[individuo][eventos[individuo][turno]]*apuestas[individuo][eventos[individuo][turno]]
}

\vspace{5mm}

\aux{recursosDeNoCooperadorEnTurno}{turno: \ent, individuo: \ent, eventos: \TLista{\TLista{\ent}}, 
pagos: \TLista{\TLista{\float}}, apuestas: \TLista{\TLista{\float}}, cooperan: \TLista{\bool}}{}{
	recursos[individuo] * \prod\limits_{i=0}^{turno}{tasaEnTurno(turno, individuo, pagos, apuestas, eventos)} + \\
	\sum\limits_{i=0}^{turno}{(fondoEnTurno(i, eventos, cooperan, recursos, pagos, apuestas) \\ *
	\prod\limits_{j=i+1}^{turno}{tasaEnTurno(j, individuo, pagos, apuestas, eventos)})}
}



\section{Ejemplos}
\subsection{Subsección: ambientes comunes de \LaTeX}

Lo principal: las fórmulas. Se puede poner en una linea, como $x_i = x_{i-1} + x_{i-2}$, o ponerse más grande:

\begin{equation}
	\sum\limits_{i=0}^{n} i
	\label{eq:1}
\end{equation}

Y se pueden citar ecuaciones con \verb|\eqref{nombreDeEq}|: \eqref{eq:1}

Ejemplo de itemizado:

\begin{itemize}
	\item Item 1
	\item Item 2
	\item Item 3
\end{itemize}

Ejemplo de enumerado con menor distancia entre items:

\begin{enumerate} \setlength\itemsep{0cm}
	\item Item 1
	\item Item 2
	\item Item 3
\end{enumerate}

Podemos escribir mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto.

Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo. Otro párrafo.

\vspace{0.3cm}

Le agregamos una separación entre párrafos. Le agregamos una separación entre párrafos. Le agregamos una separación entre párrafos. Le agregamos una separación entre párrafos. Le agregamos una separación entre párrafos.

\vspace{0.3cm}

La tabla \ref{tab:ejemplo} es un ejemplo de cómo se hace una tabla.

\begin{table}[h!]
	\centering
	\begin{tabular}{||l c c r||} 
		\hline
		Col1 & Col2 & Col2 & Col3 \\ [0.5ex] 
		\hline\hline
		1 & 6 & 87837 & 787 \\ 
		2 & 7 & 78 & 5415 \\
		3 & 545 & 778 & 7507 \\
		4 & 545 & 18744 & 7560 \\
		5 & 88 & 788 & 6344 \\
		\hline
	\end{tabular}
	\caption{Ejemplo de tabla}
	\label{tab:ejemplo}
\end{table}


La figura \ref{fig:subfigs} es un ejemplo de cómo se agrega una imagen.

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.6\textwidth]{logo_dc.jpg}
	\caption{Ejemplo de figura}
	\label{fig:ejemplo}
\end{figure}

\begin{figure}[ht!]
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{LaTeX-project} 
		\caption{Logo de LaTeX}
		\label{fig:subfig1}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.7\linewidth]{TeX}
		\caption{Logo de TeX}
		\label{fig:subfig2}
	\end{subfigure}
	\caption{Ejemplo para poner dos figuras juntas. Y citarlas por separado a (\subref{fig:subfig1}) y (\subref{fig:subfig2}).}
	% OJO: el caption siempre va antes del label
	\label{fig:subfigs}
\end{figure}



% Para hacer que quede todo en una misma linea, se puede usar minipage
%\begin{minipage}[t]{\textwidth}
	\begin{lstlisting}[caption={Ejemplo de código (usando los estilos de la cátedra, ver las macros para más detalles)},label=code:for]
res := 0;
i := 0;
while (i < s.size()) do
	res := res + s[i];
	i := i + 1
endwhile
	\end{lstlisting}
%\end{minipage}

Si se pone un label al \verb|lstlisting|, se puede referenciar: Código \ref{code:for}.


\subsection{Macros de la cátedra para especificar}

\begin{proc}{nombre}{\In paramIn : \nat, \Inout paramInout : \TLista{\ent}}{tipoRes}
	%    \modifica{parametro1, parametro2,..}
	\requiere{expresionBooleana1}
	\asegura{expresionBooleana2}
	\aux{auxiliar1}{parametros}{tipoRes}{expresion}
	\pred{pred1}{parametros}{expresion} 
\end{proc}

\aux{auxiliarSuelto}{parametros}{tipoRes}{expresion}
% \paraTodo{variable}{tipo}{expresion}
% \existe{variable}{tipo}{expresion}
% Pueden tener [unalinea] para que no se divida en varias lineas
\pred{predSuelto}{parametros}{\paraTodo[unalinea]{variable}{tipo}{algo \implicaLuego expresion}}
\pred{predSuelto}{parametros}{\existe[unalinea]{variable}{tipo}{algo \yLuego expresion}}



\end{document}
